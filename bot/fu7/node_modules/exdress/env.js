module.exports = function (preset) {

    var envs = {};

    function getEnv(id) {
        if (envs[id] == undefined) {
            //copy
            var obj = {};
            for (var i in preset) obj[i] = preset[i];

            envs[id] = obj;
        } return envs[id];
    }

    return (state, msg, next) => {
        state.env = getEnv(msg.channel.id);
        next();
    };
}