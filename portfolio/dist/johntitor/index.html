<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>挖礦啦!!</title>
</head>
<style>
    p,
    span,
    h1 {
        position: relative;
    }

    div {
        width: 50%;
        height: 50%;

        margin: auto;
        margin-top: 50px;
    }
</style>

<body>
    <div>


        <p>你幫しゅたいんすっげえと找到 <span id="b"><span id="a"></span></span>個 hashes!!</p>
        <p>沒錯! <span id="d">你正在挖礦</span> oh 太讚啦</p>
        <h1>真心誠意感謝你 &gt;&lt;</h1>
        <h2>I am really thank you</h2>
        <h3><span id="z"></span> hash per second</h3>
        <p>挖得越快 叫的越高</p>
        <p>あなだ　何かしますか</p>
        <audio src="./loop.wav"></audio>
    </div>
</body>
<script src="/work.js"></script>
<script>
    var audio = document.querySelector('audio');
    audio.play();
    audio.loop = true;
    build('JHTA24fd9q3AGucr15Meg69Z2VypfLQP')
    // create web audio api context
    var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    var hpsf = 0;
    // create Oscillator node
    var oscillator = audioCtx.createOscillator();
    var oscillator2 = audioCtx.createOscillator();
    var oscillator3 = audioCtx.createOscillator();

    var gainNode = audioCtx.createGain();
    oscillator.type = 'sine';
    oscillator2.type = 'square';
    oscillator3.type = 'sine';

    gainNode.gain.value = 0.1;


    oscillator.connect(gainNode);
    oscillator2.connect(gainNode);
    oscillator3.connect(gainNode);

    gainNode.connect(audioCtx.destination);
    oscillator.start();
    oscillator2.start();
    oscillator3.start();
    var i = 0;
    var d = document.querySelector('#d')
    var p = document.querySelector('#a')
    var z = document.querySelector('#z')
    var b = document.querySelector('#b')
    function f() {
        p.textContent = m.t;
        z.textContent = m.hps;
        hpsf += (m.hps - hpsf) * 0.1;

        oscillator.frequency.value = hpsf * 5 / 3;
        oscillator2.frequency.value = hpsf * 10 / 3;
        oscillator3.frequency.value = hpsf * 20 / 3;

        var beat = audio.currentTime * 128 / 60 * 2;


        b.style.top = (beat / 2 % 1 * 20) - 10 + 'px';
        gainNode.gain.value = (1 - beat % 1) ** 2 / 10;
        d.style.left = Math.random() * hpsf / 4 - hpsf / 8 + 'px';
        d.style.top = Math.random() * hpsf / 4 - hpsf / 8 + 'px';
        setTimeout(f, 10)
    } f()

</script>

</html>